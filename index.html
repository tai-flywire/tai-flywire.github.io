<!DOCTYPE html>
<html lang="en">

<head>
  <title>Agents Integration Demo</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Add meta header for IE Compatibility -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <!-- Include the flywire-integration.js script -->
  <script src="https://agents-integration.flywire.lol/flywire-integration.js"></script>
</head>

<body>
  <!-- Add a button element -->
  <button id="payButton">
    Pay now with Flywire
  </button>
  <a href="https://agents.demo.flywire.com/api/payments/4e556c3f-60f1-43f1-b634-eb398d18ffff/pay">pay link from API</a>
  <a href="https://agents.demo.flywire.com/api/payments/4e556c3f-60f1-43f1-b634-eb398d18ffff">self link from API</a>

  <script>
    // Add an event listener
    document
      .querySelector("#payButton")
      .addEventListener("click", e => {
        e.preventDefault();

        const values = {
          // see Configuration values for all supported fields
          reference: '4JUCA4', // REQUIRED - will be provided by Flywire
          email: 'payer@example.com', // optional
          first_name: 'Example', // optional
          last_name: 'Payer', // optional
          country: 'US', // optional
          phone: '+12025550123', // optional

          // Custom fields - this is just an example of how to pass them
          // reach out to Flywire to configure your custom fields
          customFields: [{
              key: 'agent_name',
              value: 'John Brown'
            },
            {
              key: 'agent_email',
              value: 'john.brown@company.com'
            }
          ]
        };

        var callbacks = {
          onClose: foo => {
            console.log("PAYMENT EXPERIENCE FINISHED");
            console.log(foo);
          }
        };

        // Initiate the Flywire integration window
        window.FlywireIntegration.initiate(values, callbacks);
      });
  </script>
</body>

</html>
