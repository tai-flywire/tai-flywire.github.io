<!DOCTYPE html>
<html lang="en">

<head>
  <title>Agents Integration Demo</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Add meta header for IE Compatibility -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
  <!-- Include the flywire-integration.js script -->
  <script src="https://agents-integration.demo.flywire.com/flywire-integration.js"></script>
  <script type="text/javascript">
    $.ajax({
      url: "https://agents.demo.flywire.com/api/payments/4e556c3f-60f1-43f1-b634-eb398d18ffff/pay",
      headers: {
        "X-Authentication-Key": "sIxmLRG5PkGj0eKp8cKo3czb0g65OhEo",
        "Accept": "application/flywire.agents.payment.details+json;version=1.0"
      }
    }).done(function() {
});
  </script>
</head>

<body>
  <!-- Add a button element -->
  <button id="payButton">
    Pay now with Flywire
  </button><br/>
  <!-- <a href="javascript: void(0);" id="pay-link">pay link from API</a><br/>
  <a href="https://agents.demo.flywire.com/api/payments/4e556c3f-60f1-43f1-b634-eb398d18ffff">self link from API</a><br/> -->

  <script>
    // Add an event listener
    document
      .querySelector("#payButton")
      .addEventListener("click", e => {
        e.preventDefault();

        const values = {
          // see Configuration values for all supported fields
          reference: '6Q4CYK', // REQUIRED - will be provided by Flywire
          email: 'payer@example.com', // optional
          first_name: 'Example', // optional
          last_name: 'Payer', // optional
          country: 'US', // optional
          phone: '+12025550123', // optional

          // Custom fields - this is just an example of how to pass them
          // reach out to Flywire to configure your custom fields
          customFields: [{
              key: 'agent_name',
              value: 'John Brown'
            },
            {
              key: 'agent_email',
              value: 'john.brown@company.com'
            }
          ]
        };

        var callbacks = {
          onClose: foo => {
            console.log("PAYMENT EXPERIENCE FINISHED");
            console.log(foo);
          }
        };

        // Initiate the Flywire integration window
        window.FlywireIntegration.initiate(values, callbacks);
      });
  </script>
</body>

</html>
